<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title>mdnsd.sh</title>
<style type="text/css">
.enscript-comment { font-style: italic; color: rgb(178,34,34); }
.enscript-function-name { font-weight: bold; color: rgb(0,0,255); }
.enscript-variable-name { font-weight: bold; color: rgb(184,134,11); }
.enscript-keyword { font-weight: bold; color: rgb(160,32,240); }
.enscript-reference { font-weight: bold; color: rgb(95,158,160); }
.enscript-string { font-weight: bold; color: rgb(188,143,143); }
.enscript-builtin { font-weight: bold; color: rgb(218,112,214); }
.enscript-type { font-weight: bold; color: rgb(34,139,34); }
.enscript-highlight { text-decoration: underline; color: 0; }
</style>
</head>
<body id="top">
<h1 style="margin:8px;" id="f1">mdnsd.sh&nbsp;&nbsp;&nbsp;<span style="font-weight: normal; font-size: 0.5em;">[<a href="mdnsd.sh">plain text</a>]</span></h1>
<hr/>
<div></div>
<pre>
<span class="enscript-reference">#!/bin/sh
</span><span class="enscript-comment"># Emacs settings: -*- tab-width: 4 -*-
</span><span class="enscript-comment">#
</span><span class="enscript-comment"># Copyright (c) 2002-2006 Apple Computer, Inc. All rights reserved.
</span><span class="enscript-comment">#
</span><span class="enscript-comment"># Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
</span><span class="enscript-comment"># you may not use this file except in compliance with the License.
</span><span class="enscript-comment"># You may obtain a copy of the License at
</span><span class="enscript-comment"># 
</span><span class="enscript-comment">#     <a href="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</a>
</span><span class="enscript-comment"># 
</span><span class="enscript-comment"># Unless required by applicable law or agreed to in writing, software
</span><span class="enscript-comment"># distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
</span><span class="enscript-comment"># WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
</span><span class="enscript-comment"># See the License for the specific language governing permissions and
</span><span class="enscript-comment"># limitations under the License.
</span><span class="enscript-comment">#
</span><span class="enscript-comment"># Linux /etc/init.d script to start/stop the mdnsd daemon.
</span><span class="enscript-comment">#
</span><span class="enscript-comment"># The following lines are used by the *BSD rcorder system to decide
</span><span class="enscript-comment"># the order it's going to run the rc.d scripts at startup time.
</span><span class="enscript-comment"># PROVIDE: mdnsd
</span><span class="enscript-comment"># REQUIRE: NETWORKING
</span>
<span class="enscript-keyword">if</span> [ -r /usr/sbin/mdnsd ]; <span class="enscript-keyword">then</span>
    DAEMON=/usr/sbin/mdnsd
<span class="enscript-keyword">else</span>
    DAEMON=/usr/local/sbin/mdnsd
<span class="enscript-keyword">fi</span>

<span class="enscript-keyword">test</span> -r $DAEMON || <span class="enscript-keyword">exit</span> 0

<span class="enscript-comment"># Some systems have start-stop-daemon, some don't. 
</span><span class="enscript-keyword">if</span> [ -r /sbin/start-stop-daemon ]; <span class="enscript-keyword">then</span>
	START=<span class="enscript-string">&quot;start-stop-daemon --start --quiet --exec&quot;</span>
	<span class="enscript-comment"># Suse Linux doesn't work with symbolic signal names, but we really don't need
</span>	<span class="enscript-comment"># to specify &quot;-s TERM&quot; since SIGTERM (15) is the default stop signal anway
</span>	<span class="enscript-comment"># STOP=&quot;start-stop-daemon --stop -s TERM --quiet --oknodo --exec&quot;
</span>	STOP=<span class="enscript-string">&quot;start-stop-daemon --stop --quiet --oknodo --retry 2 --exec&quot;</span>
<span class="enscript-keyword">else</span>
	killmdnsd() {
		kill -TERM `cat /var/run/mdnsd.pid`
		sleep 1
	}
	START=
	STOP=killmdnsd
<span class="enscript-keyword">fi</span>

<span class="enscript-keyword">case</span> <span class="enscript-string">&quot;$1&quot;</span> <span class="enscript-keyword">in</span>
    start)
	<span class="enscript-keyword">echo</span> -n <span class="enscript-string">&quot;Starting Apple Darwin Multicast DNS / DNS Service Discovery daemon:&quot;</span>
	<span class="enscript-keyword">echo</span> -n <span class="enscript-string">&quot; mdnsd&quot;</span>
        $START $DAEMON
	<span class="enscript-keyword">echo</span> <span class="enscript-string">&quot;.&quot;</span>
	;;
    stop)
        <span class="enscript-keyword">echo</span> -n <span class="enscript-string">&quot;Stopping Apple Darwin Multicast DNS / DNS Service Discovery daemon:&quot;</span>
        <span class="enscript-keyword">echo</span> -n <span class="enscript-string">&quot; mdnsd&quot;</span> ; $STOP $DAEMON
        <span class="enscript-keyword">echo</span> <span class="enscript-string">&quot;.&quot;</span>
	;;
    reload|restart|force-reload)
		<span class="enscript-keyword">echo</span> -n <span class="enscript-string">&quot;Restarting Apple Darwin Multicast DNS / DNS Service Discovery daemon:&quot;</span>
		$STOP $DAEMON
		$START $DAEMON
		<span class="enscript-keyword">echo</span> -n <span class="enscript-string">&quot; mdnsd&quot;</span>
	;;
    *)
	<span class="enscript-keyword">echo</span> <span class="enscript-string">&quot;Usage: /etc/init.d/mDNS {start|stop|reload|restart}&quot;</span>
	<span class="enscript-keyword">exit</span> 1
	;;
<span class="enscript-keyword">esac</span>

<span class="enscript-keyword">exit</span> 0
</pre>
<hr />
</body></html>