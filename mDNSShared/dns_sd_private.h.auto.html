<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title>dns_sd_private.h</title>
<style type="text/css">
.enscript-comment { font-style: italic; color: rgb(178,34,34); }
.enscript-function-name { font-weight: bold; color: rgb(0,0,255); }
.enscript-variable-name { font-weight: bold; color: rgb(184,134,11); }
.enscript-keyword { font-weight: bold; color: rgb(160,32,240); }
.enscript-reference { font-weight: bold; color: rgb(95,158,160); }
.enscript-string { font-weight: bold; color: rgb(188,143,143); }
.enscript-builtin { font-weight: bold; color: rgb(218,112,214); }
.enscript-type { font-weight: bold; color: rgb(34,139,34); }
.enscript-highlight { text-decoration: underline; color: 0; }
</style>
</head>
<body id="top">
<h1 style="margin:8px;" id="f1">dns_sd_private.h&nbsp;&nbsp;&nbsp;<span style="font-weight: normal; font-size: 0.5em;">[<a href="dns_sd_private.h">plain text</a>]</span></h1>
<hr/>
<div></div>
<pre>
<span class="enscript-comment">/* -*- Mode: C; tab-width: 4 -*-
 * 
 * Copyright (c) 2015-2019 Apple Inc. All rights reserved.
 */</span>

#<span class="enscript-reference">ifndef</span> <span class="enscript-variable-name">_DNS_SD_PRIVATE_H</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">_DNS_SD_PRIVATE_H</span>

#<span class="enscript-reference">include</span> <span class="enscript-string">&lt;dns_sd.h&gt;</span>

<span class="enscript-comment">// Private flags (kDNSServiceFlagsPrivateOne, kDNSServiceFlagsPrivateTwo, kDNSServiceFlagsPrivateThree, kDNSServiceFlagsPrivateFour, kDNSServiceFlagsPrivateFive) from dns_sd.h
</span><span class="enscript-type">enum</span>
{
    kDNSServiceFlagsDenyConstrained        = 0x2000,
    <span class="enscript-comment">/*
     * This flag is meaningful only for Unicast DNS queries. When set, the daemon will restrict
     * DNS resolutions on interfaces defined as constrained for that request.
     */</span>

    kDNSServiceFlagsDenyCellular           = 0x8000000,
    <span class="enscript-comment">/*
     * This flag is meaningful only for Unicast DNS queries. When set, the daemon will restrict
     * DNS resolutions on the cellular interface for that request.
     */</span>
    kDNSServiceFlagsServiceIndex           = 0x10000000,
    <span class="enscript-comment">/*
     * This flag is meaningful only for DNSServiceGetAddrInfo() for Unicast DNS queries.
     * When set, DNSServiceGetAddrInfo() will interpret the &quot;interfaceIndex&quot; argument of the call
     * as the &quot;serviceIndex&quot;.
     */</span>

    kDNSServiceFlagsDenyExpensive          = 0x20000000,
    <span class="enscript-comment">/*
     * This flag is meaningful only for Unicast DNS queries. When set, the daemon will restrict
     * DNS resolutions on interfaces defined as expensive for that request.
     */</span>

    kDNSServiceFlagsPathEvaluationDone     = 0x40000000
    <span class="enscript-comment">/*
     * This flag is meaningful for only Unicast DNS queries.
     * When set, it indicates that Network PathEvaluation has already been performed.
     */</span>
};

#<span class="enscript-reference">if</span> !<span class="enscript-reference">defined</span>(<span class="enscript-variable-name">DNSSD_NO_CREATE_DELEGATE_CONNECTION</span>) || !<span class="enscript-variable-name">DNSSD_NO_CREATE_DELEGATE_CONNECTION</span>
<span class="enscript-comment">/* DNSServiceCreateDelegateConnection()
 *
 * Parameters:
 *
 * sdRef:           A pointer to an uninitialized DNSServiceRef. Deallocating
 *                  the reference (via DNSServiceRefDeallocate()) severs the
 *                  connection and deregisters all records registered on this connection.
 *
 * pid :            Process ID of the delegate
 *
 * uuid:            UUID of the delegate
 *
 *                  Note that only one of the two arguments (pid or uuid) can be specified. If pid
 *                  is zero, uuid will be assumed to be a valid value; otherwise pid will be used.
 *
 * return value:    Returns kDNSServiceErr_NoError on success, otherwise returns
 *                  an error code indicating the specific failure that occurred (in which
 *                  case the DNSServiceRef is not initialized). kDNSServiceErr_NotAuth is
 *                  returned to indicate that the calling process does not have entitlements
 *                  to use this API.
 */</span>
DNSSD_EXPORT
DNSServiceErrorType DNSSD_API <span class="enscript-function-name">DNSServiceCreateDelegateConnection</span>(DNSServiceRef *sdRef, int32_t pid, uuid_t uuid);
#<span class="enscript-reference">endif</span>

<span class="enscript-comment">// Map the source port of the local UDP socket that was opened for sending the DNS query
</span><span class="enscript-comment">// to the process ID of the application that triggered the DNS resolution.
</span><span class="enscript-comment">//
</span><span class="enscript-comment">/* DNSServiceGetPID() Parameters:
 *
 * srcport:         Source port (in network byte order) of the UDP socket that was created by
 *                  the daemon to send the DNS query on the wire.
 *
 * pid:             Process ID of the application that started the name resolution which triggered
 *                  the daemon to send the query on the wire. The value can be -1 if the srcport
 *                  cannot be mapped.
 *
 * return value:    Returns kDNSServiceErr_NoError on success, or kDNSServiceErr_ServiceNotRunning
 *                  if the daemon is not running. The value of the pid is undefined if the return
 *                  value has error.
 */</span>
DNSSD_EXPORT
DNSServiceErrorType DNSSD_API DNSServiceGetPID
(
    uint16_t srcport,
    int32_t *pid
);

DNSSD_EXPORT
DNSServiceErrorType DNSSD_API <span class="enscript-function-name">DNSServiceSetDefaultDomainForUser</span>(DNSServiceFlags flags, <span class="enscript-type">const</span> <span class="enscript-type">char</span> *domain);

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kDNSServiceCompPrivateDNS</span>   <span class="enscript-string">&quot;PrivateDNS&quot;</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kDNSServiceCompMulticastDNS</span> <span class="enscript-string">&quot;MulticastDNS&quot;</span>

#<span class="enscript-reference">endif</span>
</pre>
<hr />
</body></html>