<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title>dnssd_xpc.h</title>
<style type="text/css">
.enscript-comment { font-style: italic; color: rgb(178,34,34); }
.enscript-function-name { font-weight: bold; color: rgb(0,0,255); }
.enscript-variable-name { font-weight: bold; color: rgb(184,134,11); }
.enscript-keyword { font-weight: bold; color: rgb(160,32,240); }
.enscript-reference { font-weight: bold; color: rgb(95,158,160); }
.enscript-string { font-weight: bold; color: rgb(188,143,143); }
.enscript-builtin { font-weight: bold; color: rgb(218,112,214); }
.enscript-type { font-weight: bold; color: rgb(34,139,34); }
.enscript-highlight { text-decoration: underline; color: 0; }
</style>
</head>
<body id="top">
<h1 style="margin:8px;" id="f1">dnssd_xpc.h&nbsp;&nbsp;&nbsp;<span style="font-weight: normal; font-size: 0.5em;">[<a href="dnssd_xpc.h">plain text</a>]</span></h1>
<hr/>
<div></div>
<pre>
<span class="enscript-comment">/*
 * Copyright (c) 2019 Apple Inc. All rights reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     <a href="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</a>
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */</span>

#<span class="enscript-reference">ifndef</span> <span class="enscript-variable-name">__DNSSD_XPC_H__</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">__DNSSD_XPC_H__</span>

#<span class="enscript-reference">include</span> <span class="enscript-string">&lt;CoreUtils/CommonServices.h&gt;</span>
#<span class="enscript-reference">include</span> <span class="enscript-string">&lt;dns_sd.h&gt;</span>
#<span class="enscript-reference">include</span> <span class="enscript-string">&lt;xpc/xpc.h&gt;</span>

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">DNSSD_MACH_SERVICE_NAME</span>	<span class="enscript-string">&quot;com.apple.dnssd.service&quot;</span>

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">DNSSD_COMMAND_GETADDRINFO</span>	<span class="enscript-string">&quot;getaddrinfo&quot;</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">DNSSD_COMMAND_STOP</span>			<span class="enscript-string">&quot;stop&quot;</span>

CU_ASSUME_NONNULL_BEGIN

#<span class="enscript-reference">ifdef</span> <span class="enscript-variable-name">__cplusplus</span>
<span class="enscript-type">extern</span> <span class="enscript-string">&quot;C&quot;</span> {
#<span class="enscript-reference">endif</span>

<span class="enscript-comment">/*!
 *	@brief
 *		Gets command as a C string from XPC message.
 *
 *	@param msg
 *		XPC message.
 *
 *	@result
 *		Command, if present. Otherwise, NULL.
 */</span>
<span class="enscript-type">const</span> <span class="enscript-type">char</span> * _Nullable
<span class="enscript-function-name">dnssd_xpc_message_get_command</span>(xpc_object_t msg);

<span class="enscript-comment">/*!
 *	@brief
 *		Gets error code from XPC message.
 *
 *	@param msg
 *		XPC message.
 *
 *	@param out_valid
 *		If non-NULL, set to true if value is present and of correct type, otherwise, set to false.
 *
 *	@result
 *		Error code, if present. Otherwise, 0.
 */</span>
DNSServiceErrorType
<span class="enscript-function-name">dnssd_xpc_message_get_error</span>(xpc_object_t msg, bool * _Nullable out_valid);

<span class="enscript-comment">/*!
 *	@brief
 *		Gets command instance ID from XPC message.
 *
 *	@param msg
 *		XPC message.
 *
 *	@param out_valid
 *		If non-NULL, set to true if value is present and of correct type, otherwise, set to false.
 *
 *	@result
 *		ID, if present. Otherwise, 0.
 */</span>
uint64_t
<span class="enscript-function-name">dnssd_xpc_message_get_id</span>(xpc_object_t msg, bool * _Nullable out_valid);

<span class="enscript-comment">/*!
 *	@brief
 *		Gets command parameter dictionary from XPC message.
 *
 *	@param msg
 *		XPC message.
 *
 *	@result
 *		Command parameter dictionary, if present. Otherwise, NULL.
 */</span>
xpc_object_t _Nullable
<span class="enscript-function-name">dnssd_xpc_message_get_parameters</span>(xpc_object_t msg);

<span class="enscript-comment">/*!
 *	@brief
 *		Gets result array from XPC message.
 *
 *	@param msg
 *		XPC message.
 *
 *	@result
 *		Result array, if present. Otherwise, NULL.
 */</span>
xpc_object_t _Nullable
<span class="enscript-function-name">dnssd_xpc_message_get_results</span>(xpc_object_t msg);

<span class="enscript-comment">/*!
 *	@brief
 *		Sets command in XPC message.
 *
 *	@param msg
 *		XPC message.
 *
 *	@param command
 *		Command as a C string.
 */</span>
<span class="enscript-type">void</span>
<span class="enscript-function-name">dnssd_xpc_message_set_command</span>(xpc_object_t msg, <span class="enscript-type">const</span> <span class="enscript-type">char</span> *command);

<span class="enscript-comment">/*!
 *	@brief
 *		Sets error code in XPC message.
 *
 *	@param msg
 *		XPC message.
 *
 *	@param error
 *		Error code.
 */</span>
<span class="enscript-type">void</span>
<span class="enscript-function-name">dnssd_xpc_message_set_error</span>(xpc_object_t msg, DNSServiceErrorType error);

<span class="enscript-comment">/*!
 *	@brief
 *		Sets command instance ID in XPC message.
 *
 *	@param msg
 *		XPC message.
 *
 *	@param ident
 *		Command instance ID.
 */</span>
<span class="enscript-type">void</span>
<span class="enscript-function-name">dnssd_xpc_message_set_id</span>(xpc_object_t msg, uint64_t ident);

<span class="enscript-comment">/*!
 *	@brief
 *		Sets command parameters dictionary in XPC message.
 *
 *	@param msg
 *		XPC message.
 *
 *	@param params
 *		Command parameters dictionary.
 */</span>
<span class="enscript-type">void</span>
<span class="enscript-function-name">dnssd_xpc_message_set_parameters</span>(xpc_object_t msg, xpc_object_t params);

<span class="enscript-comment">/*!
 *	@brief
 *		Sets command result array in XPC message.
 *
 *	@param msg
 *		XPC message.
 *
 *	@param results
 *		Command result array.
 */</span>
<span class="enscript-type">void</span>
<span class="enscript-function-name">dnssd_xpc_message_set_results</span>(xpc_object_t msg, xpc_object_t results);

<span class="enscript-comment">/*!
 *	@brief
 *		Gets delegate ID as a PID from a command parameters dictionary.
 *
 *	@param params
 *		Command parameters dictionary.
 *
 *	@param out_valid
 *		If non-NULL, set to true if value is present and of correct type, otherwise, set to false.
 *
 *	@result
 *		Delegate ID as PID, if present. Otherwise, 0.
 */</span>
pid_t
<span class="enscript-function-name">dnssd_xpc_parameters_get_delegate_pid</span>(xpc_object_t params, bool * _Nullable out_valid);

<span class="enscript-comment">/*!
 *	@brief
 *		Gets delegate ID as a UUID from a command parameters dictionary.
 *
 *	@param params
 *		Command parameters dictionary.
 *
 *	@result
 *		Delegate ID as UUID, if present. Otherwise, NULL.
 */</span>
<span class="enscript-type">const</span> uint8_t * _Nullable
<span class="enscript-function-name">dnssd_xpc_parameters_get_delegate_uuid</span>(xpc_object_t params);

<span class="enscript-comment">/*!
 *	@brief
 *		Gets flags from a command parameters dictionary.
 *
 *	@param params
 *		Command parameters dictionary.
 *
 *	@param out_valid
 *		If non-NULL, set to true if value is present and of correct type, otherwise, set to false.
 *
 *	@result
 *		Flags, if present. Otherwise, 0.
 */</span>
DNSServiceFlags
<span class="enscript-function-name">dnssd_xpc_parameters_get_flags</span>(xpc_object_t params, bool * _Nullable out_valid);

<span class="enscript-comment">/*!
 *	@brief
 *		Gets hostname from a command parameters dictionary.
 *
 *	@param params
 *		Command parameters dictionary.
 *
 *	@result
 *		Hostname, if present, as an XPC string object. Otherwise, NULL.
 */</span>
xpc_object_t _Nullable
<span class="enscript-function-name">dnssd_xpc_parameters_get_hostname_object</span>(xpc_object_t params);

<span class="enscript-comment">/*!
 *	@brief
 *		Gets interface index from a command parameters dictionary.
 *
 *	@param params
 *		Command parameters dictionary.
 *
 *	@para out_valid
 *		If non-NULL, set to true if value is present and of correct type, otherwise, set to false.
 *
 *	@result
 *		Interface index, if present. Otherwise, 0.
 */</span>
uint32_t
<span class="enscript-function-name">dnssd_xpc_parameters_get_interface_index</span>(xpc_object_t params, bool * _Nullable out_valid);

<span class="enscript-comment">/*!
 *	@brief
 *		Gets need_auth_tags boolean value from a command parameters dictionary.
 *
 *	@param params
 *		Command parameters dictionary.
 *
 *	@result
 *		A boolean value.
 */</span>
bool
<span class="enscript-function-name">dnssd_xpc_parameters_get_need_authentication_tags</span>(xpc_object_t params);

<span class="enscript-comment">/*!
 *	@brief
 *		Gets protocols from a command parameters dictionary.
 *
 *	@param params
 *		Command parameters dictionary.
 *
 *	@param out_valid
 *		If non-NULL, set to true if value is present and of correct type, otherwise, set to false.
 *
 *	@result
 *		Protocols, if present. Otherwise, 0.
 */</span>
DNSServiceProtocol
<span class="enscript-function-name">dnssd_xpc_parameters_get_protocols</span>(xpc_object_t params, bool * _Nullable out_valid);

<span class="enscript-comment">/*!
 *	@brief
 *		Sets delegate ID as a PID in a command parameters dictionary.
 *
 *	@param params
 *		Command parameters dictionary.
 *
 *	@param pid
 *		PID.
 */</span>
<span class="enscript-type">void</span>
<span class="enscript-function-name">dnssd_xpc_parameters_set_delegate_pid</span>(xpc_object_t params, pid_t pid);

<span class="enscript-comment">/*!
 *	@brief
 *		Sets delegate ID as a UUID in a command parameters dictionary.
 *
 *	@param params
 *		Command parameters dictionary.
 *
 *	@param uuid
 *		UUID.
 */</span>
<span class="enscript-type">void</span>
<span class="enscript-function-name">dnssd_xpc_parameters_set_delegate_uuid</span>(xpc_object_t params, uuid_t _Nonnull uuid);

<span class="enscript-comment">/*!
 *	@brief
 *		Sets flags in a command parameters dictionary.
 *
 *	@param params
 *		Command parameters dictionary.
 *
 *	@param flags
 *		Flags.
 */</span>
<span class="enscript-type">void</span>
<span class="enscript-function-name">dnssd_xpc_parameters_set_flags</span>(xpc_object_t params, DNSServiceFlags flags);

<span class="enscript-comment">/*!
 *	@brief
 *		Sets hostname in a command parameters dictionary.
 *
 *	@param params
 *		Command parameters dictionary.
 *
 *	@param hostname
 *		Hostname.
 */</span>
<span class="enscript-type">void</span>
<span class="enscript-function-name">dnssd_xpc_parameters_set_hostname</span>(xpc_object_t params, <span class="enscript-type">const</span> <span class="enscript-type">char</span> *hostname);

<span class="enscript-comment">/*!
 *	@brief
 *		Sets interface index in a command parameters dictionary.
 *
 *	@param params
 *		Command parameters dictionary.
 *
 *	@param interface_index
 *		Interface index.
 */</span>
<span class="enscript-type">void</span>
<span class="enscript-function-name">dnssd_xpc_parameters_set_interface_index</span>(xpc_object_t params, uint32_t interface_index);

<span class="enscript-comment">/*!
 *	@brief
 *		Sets whether mDNSResponder should include an authentication tag for each hostname resolution.
 *
 *	@param params
 *		Command parameters dictionary.
 *
 *	@param need
 *		Pass &lt;code&gt;true&lt;/code&gt; to enable this behavior. Pass &lt;code&gt;false&lt;/code&gt; to disable it.
 */</span>
<span class="enscript-type">void</span>
<span class="enscript-function-name">dnssd_xpc_parameters_set_need_authentication_tags</span>(xpc_object_t params, bool need);

<span class="enscript-comment">/*!
 *	@brief
 *		Sets protocols in a command parameters dictionary.
 *
 *	@param params
 *		Command parameters dictionary.
 *
 *	@param protocols
 *		Protocols.
 */</span>
<span class="enscript-type">void</span>
<span class="enscript-function-name">dnssd_xpc_parameters_set_protocols</span>(xpc_object_t params, DNSServiceProtocol protocols);

<span class="enscript-comment">/*!
 *	@brief
 *		Gets authentication tag from a command result dictionary.
 *
 *	@param result
 *		The command result dictionary.
 *
 *	@result
 *		Authentication tag, if present, as an XPC data object. Otherwise, NULL.
 */</span>
xpc_object_t _Nullable
<span class="enscript-function-name">dnssd_xpc_result_get_authentication_tag_object</span>(xpc_object_t result);

<span class="enscript-comment">/*!
 *	@brief
 *		Gets error code from a command result dictionary.
 *
 *	@param result
 *		The command result dictionary.
 *
 *	@param out_valid
 *		If non-NULL, set to true if value is present and of correct type, otherwise, set to false.
 *
 *	@result
 *		Error code, if present. Otherwise, 0.
 */</span>
DNSServiceErrorType
<span class="enscript-function-name">dnssd_xpc_result_get_error</span>(xpc_object_t result, bool * _Nullable out_valid);

<span class="enscript-comment">/*!
 *	@brief
 *		Gets flags from a command result dictionary.
 *
 *	@param result
 *		The command result dictionary.
 *
 *	@param out_valid
 *		If non-NULL, set to true if value is present and of correct type, otherwise, set to false.
 *
 *	@result
 *		Flags, if present. Otherwise, 0.
 */</span>
DNSServiceFlags
<span class="enscript-function-name">dnssd_xpc_result_get_flags</span>(xpc_object_t result, bool * _Nullable out_valid);

<span class="enscript-comment">/*!
 *	@brief
 *		Gets interface index from a command result dictionary.
 *
 *	@param result
 *		The command result dictionary.
 *
 *	@param out_valid
 *		If non-NULL, set to true if value is present and of correct type, otherwise, set to false.
 *
 *	@result
 *		Interface index, if present. Otherwise, 0.
 */</span>
uint32_t
<span class="enscript-function-name">dnssd_xpc_result_get_interface_index</span>(xpc_object_t result, bool * _Nullable out_valid);

<span class="enscript-comment">/*!
 *	@brief
 *		Gets record class from a command result dictionary.
 *
 *	@param result
 *		The command result dictionary.
 *
 *	@param out_valid
 *		If non-NULL, set to true if value is present and of correct type, otherwise, set to false.
 *
 *	@result
 *		Record class, if present. Otherwise, 0.
 */</span>
uint16_t
<span class="enscript-function-name">dnssd_xpc_result_get_record_class</span>(xpc_object_t result, bool * _Nullable out_valid);

<span class="enscript-comment">/*!
 *	@brief
 *		Gets record data from a command result dictionary.
 *
 *	@param result
 *		The command result dictionary.
 *
 *	@result
 *		Record data, if present, as an XPC data object. Otherwise, NULL.
 */</span>
xpc_object_t _Nullable
<span class="enscript-function-name">dnssd_xpc_result_get_record_data_object</span>(xpc_object_t result);

<span class="enscript-comment">/*!
 *	@brief
 *		Gets record name from a command result dictionary.
 *
 *	@param result
 *		The command result dictionary.
 *
 *	@result
 *		Record name, if present, as an XPC string object. Otherwise, NULL.
 */</span>
xpc_object_t _Nullable
<span class="enscript-function-name">dnssd_xpc_result_get_record_name_object</span>(xpc_object_t result);

<span class="enscript-comment">/*!
 *	@brief
 *		Gets record type from a command result dictionary.
 *
 *	@param result
 *		The command result dictionary.
 *
 *	@param out_valid
 *		If non-NULL, set to true if value is present and of correct type, otherwise, set to false.
 *
 *	@result
 *		Record type, if present. Otherwise, 0.
 */</span>
uint16_t
<span class="enscript-function-name">dnssd_xpc_result_get_record_type</span>(xpc_object_t result, bool * _Nullable out_valid);

<span class="enscript-comment">/*!
 *	@brief
 *		Sets the authentication tag in a command result dictionary.
 *
 *	@param result
 *		The command result dictionary.
 *
 *	@param auth_tag_ptr
 *		Pointer to the authentication tag.
 *
 *	@param auth_tag_len
 *		Length of the authentication tag.
 */</span>
<span class="enscript-type">void</span>
<span class="enscript-function-name">dnssd_xpc_result_set_authentication_tag</span>(xpc_object_t result, <span class="enscript-type">const</span> <span class="enscript-type">void</span> *auth_tag_ptr, size_t auth_tag_len);

<span class="enscript-comment">/*!
 *	@brief
 *		Sets the error code in a command result dictionary.
 *
 *	@param result
 *		The command result dictionary.
 *
 *	@param error
 *		Error code.
 */</span>
<span class="enscript-type">void</span>
<span class="enscript-function-name">dnssd_xpc_result_set_error</span>(xpc_object_t result, DNSServiceErrorType error);

<span class="enscript-comment">/*!
 *	@brief
 *		Sets flags in a command result dictionary.
 *
 *	@param result
 *		The command result dictionary.
 *
 *	@param flags
 *		Flags.
 */</span>
<span class="enscript-type">void</span>
<span class="enscript-function-name">dnssd_xpc_result_set_flags</span>(xpc_object_t result, DNSServiceFlags flags);

<span class="enscript-comment">/*!
 *	@brief
 *		Sets interface index in a command result dictionary.
 *
 *	@param result
 *		The command result dictionary.
 *
 *	@param interface_index
 *		Interface index.
 */</span>
<span class="enscript-type">void</span>
<span class="enscript-function-name">dnssd_xpc_result_set_interface_index</span>(xpc_object_t result, uint32_t interface_index);

<span class="enscript-comment">/*!
 *	@brief
 *		Sets record class in a command result dictionary.
 *
 *	@param result
 *		The command result dictionary.
 *
 *	@param class
 *		Record class.
 */</span>
<span class="enscript-type">void</span>
<span class="enscript-function-name">dnssd_xpc_result_set_record_class</span>(xpc_object_t result, uint16_t class);

<span class="enscript-comment">/*!
 *	@brief
 *		Sets the record data in a command result dictionary.
 *
 *	@param result
 *		The command result dictionary.
 *
 *	@param data_ptr
 *		Pointer to the record data.
 *
 *	@param data_len
 *		Length of the record data.
 */</span>
<span class="enscript-type">void</span>
<span class="enscript-function-name">dnssd_xpc_result_set_record_data</span>(xpc_object_t result, <span class="enscript-type">const</span> <span class="enscript-type">void</span> * _Nullable data_ptr, size_t data_len);

<span class="enscript-comment">/*!
 *	@brief
 *		Sets record name in a command result dictionary.
 *
 *	@param result
 *		The command result dictionary.
 *
 *	@param name
 *		Record name.
 */</span>
<span class="enscript-type">void</span>
<span class="enscript-function-name">dnssd_xpc_result_set_record_name</span>(xpc_object_t result, <span class="enscript-type">const</span> <span class="enscript-type">char</span> *name);

<span class="enscript-comment">/*!
 *	@brief
 *		Sets record type in a command result dictionary.
 *
 *	@param result
 *		The command result dictionary.
 *
 *	@param type
 *		Record type.
 */</span>
<span class="enscript-type">void</span>
<span class="enscript-function-name">dnssd_xpc_result_set_record_type</span>(xpc_object_t result, uint16_t type);

#<span class="enscript-reference">ifdef</span> <span class="enscript-variable-name">__cplusplus</span>
}
#<span class="enscript-reference">endif</span>

CU_ASSUME_NONNULL_END

#<span class="enscript-reference">endif</span>	// <span class="enscript-variable-name">__DNSSD_XPC_H__</span>
</pre>
<hr />
</body></html>